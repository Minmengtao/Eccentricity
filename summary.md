大图上顶点偏心率计算方法研究

要求图中任意两个顶点均为可达，提出计算图的偏心率：顶点偏心率是指从一个点出发，最短能走几步抵达图中所有顶点。

定义图的直径是图中顶点的偏心率最大值，图的半径是图中顶点偏心率最小值

### 想要解决的问题

需要快速精确计算图中全部顶点的偏心率

### 最easy的方法

通过广度优先遍历搜索$(BFS)$计算每个顶点的偏心率

**Drawbacks**

大量使用$BFS$导致计算算法时间空间复杂度很高，无法快速精确计算偏心率，所以不能用于上百万顶点的图中。

### $BoundEcc$

通过三角形不等式得到顶点的偏心率三角形不等式
$$
ecc(v) \leq ecc(u) + dist(u,v)
$$

$$
ecc(v) \geq ecc(u) - dist(u,v)
$$

$$
ecc(v) \geq dist(u,v), for \ u \, \in V
$$

通过上面的不等式，得到图中顶点 $v$ 的偏心率为
$$
\overline{ecc}(v)=min(\overline{ecc}(v),ecc(u)+dist(u,v)),\overline{ecc}(v)=+\infty
$$

$$
\underline{ecc}(v)=max(\underline{ecc}(v),ecc(u)-dist(u,v),dist(u,v)),\underline{ecc}(v)=0
$$

其中 $\overline{ecc}(v)$ 是指 $v$ 的偏心率上界，$\underline{ecc}(v)$ 是指 $v$ 的偏心率下界，取图中任意一点 $u$ 得到它的准确偏心率，然后计算出节点$u$最短经过 $dist(u,v)$ 步到达节点$v$

在使用$BFS$迭代时遍历选取的顶点策略

1. 选取度最大的顶点
2. 选择最大上界的顶点
3. 选择最小下界的顶点

确定顶点后大量使用$BFS$遍历来得到顶点$u$的偏心率，并根据得到的最短路径来更新其他顶点的偏心率上下界，直到上下界相等就不再更新。

如果还有不确定的顶点偏心率，则使用$BFS$迭代求解

**Drawbacks**

由于有的顶点最后计算的偏心率上下界并没有收敛相等，导致需要对这类顶点重新用$BFS$计算偏心率，在数百万顶点中$BoundEcc$计算效率较低

### 选取$k$个节点求解偏心率$ECC$

- 构建整张图的$PLL$索引，用于查询任意两点之间的最短距离长度

1. 计算图的$PLL$索引来计算成对最短距离问题
2. 在每个节点建立集合$S(*)$，$S(*)$是记录一些节点到达$v$的最短距离
3. 如果$V_i$到邻居的最短距离更新了，就要检查$V_i$到该邻居的邻居的最短距离是否未更新。
4. 直接计算顶点$u$和顶点$v$的$dist(u,v)$很难，可以通过集合$S(*)$之中的中介节点计算

- 给出节点集$V$，$V$是前$k$个度最大的节点集合（顶点参考池）

- 建立顶点参考池的顶点全局$BFS$索引，并且按照最短路径距离从小到大排序

- 计算顶点$u$的偏心率，找到距离$u$最近的参考顶点$z$，通过划分顶点$z$的$BFS$索引集合$L_z$，从距离最大的顶点由右向左依次划分为两个互不相交的集合$W,\ V'$，并且$W$沿着索引向前扩展，在扩展的过程中满足:

$$
pecc(u|W)=dist(u,z)+pecc(z|V')
$$

​		就可以不用计算了，顶点$u$的偏心率$ecc(u)=pecc(u|W)$

**Drawbacks**

参考顶点的全局索引构建代价高，在大图中耗费时间较长，另一方面，较长的索引意味着需要使用大量的PLL查询请求，查找代价太高，导致计算时效率低下。

### $新算法ECC-DIS$

#### 子图划分算法$SGR$

这部分优化$ECC$算法中的建立顶点参考池，不是单独选取前$K$个度最大的顶点，对建立参考顶点索引进行优化

1. 选定图中度数最大的顶点，将顶点的邻居都划分到子图中。
2. 将剩下为划分的节点继续划分子图，重复步骤1，一共选取$K$个参考点
3. $K$个顶点作为参考顶点，围绕这$K$个顶点向外扩展，将整个图划分为互不相交的$K$个子图
4. 每个子图依次使用$BFS$遍历，得到所有参考顶点$L_{z_i}$以及参考顶点$z_i$的局部偏心率

#### 偏心率计算优化算法$EccComp$

在计算顶点$u$的偏心率上下界的时候，需要选取距离顶点$u$较远的参考顶点$z$（即$dist(u,z)$尽可能大）

1. 计算顶点$u$对于$k$个子图的局部偏心率上下界，得到下界的最大值$maxlb$
2. 剪枝舍去$k$个子图中上界小于等于$maxlb$的子图
3. 将所有子图排序，上界大的优先，上界一样大的下界大的优先
4. 选定第一个参考顶点$z$的局部$BFS$索引，将子图$V_i$划分为两个部分$W_1,\ W_2$，更新顶点$u$的局部偏心率上界$\overline{pecc}(u)$和下界$\underline{pecc}(u)$，直到上界等于下界或者$\overline{pecc}(u)<maxlb$，结束该子图的运算。
5. 更新$maxlb$，剪枝舍去上界小于等于$maxlb$的子图，重复步骤3
6. 计算完所有子图后，$maxlb$就是顶点$u$的偏心率

采用步骤3更新$maxlb$的效率会很高

#### $顶点合并策略NodeMerge$

分析顶点邻居关系，将单支路径上这两类顶点合并，在其他未合并顶点偏心率计算出来后，可以推断出合并顶点的偏心率，降低计算顶点规模。

- 合并初始图中所有度数为$1$的顶点（忽略合并顶点的与未合并顶点的边）

第一类顶点的偏心率可由根顶点确定（合并节点$u$的偏心率$ecc(u)$等于根顶点偏心率$+1$）

- 反复合并经过后度数为$1$的顶点（忽略合并顶点的与未合并顶点的边）

第二类顶点的偏心率需要进一步判断$合并节点u的偏心率ecc(u)=max(根节点偏心率+1，合并顶点的深度)$





### Problem

- $Ecc$算法中顶点参考池是遍历整张图的吗？
- $Ecc$算法是否还考虑了增边删边
- $P_{15}$修改子图内所有顶点的邻居顶点度数
- $P_{15}$依次遍历直到覆盖图中所有顶点为止，这是指从子图$BFS$遍历到整张图？